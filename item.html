<html>
<head>
    <title>Opening Item</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div style="text-align: center; padding: 20px; font-family: Arial, sans-serif;">
        <h2>Opening Item...</h2>
        <p id="status">Checking if app is available...</p>
        <a href="https://play.google.com/store/apps/details?id=com.jaayma.project1" 
           id="playstore-link" 
           style="display: none; background: #4285f4; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
           Install App from Play Store
        </a>
    </div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const itemId = urlParams.get('id');
        const statusEl = document.getElementById('status');
        const playstoreLink = document.getElementById('playstore-link');
        
        if (!itemId) {
            statusEl.textContent = "No item ID provided.";
            playstoreLink.style.display = 'inline-block';
            return;
        }
        
        // Method 1: Try Android Intent (most reliable)
        const intentUrl = `intent://jaayma-app.github.io/item?id=${itemId}#Intent;scheme=https;package=com.jaayma.project1;S.browser_fallback_url=https://play.google.com/store/apps/details?id=com.jaayma.project1;end`;
        
        // Method 2: Try custom scheme
        const customScheme = `jaayma://item?id=${itemId}`;
        
        let hasAppOpened = false;
        let startTime = Date.now();
        
        // Simplified approach - just try to open app and show button after delay
        function tryOpenApp() {
            statusEl.textContent = "Attempting to open app...";
            
            // Try Android Intent first
            try {
                window.location.href = intentUrl;
            } catch(e) {
                console.log("Intent failed:", e);
            }
            
            // Always show the Play Store button after 3 seconds
            setTimeout(() => {
                statusEl.textContent = "If the app didn't open, install it from Play Store:";
                playstoreLink.style.display = 'inline-block';
            }, 3000);
        }
        
        // Start the process
        tryOpenApp();
    </script>
</body>
</html>
